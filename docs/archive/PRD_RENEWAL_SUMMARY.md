### **PRD 요약: Oracle NLSQL 서버 리뉴얼 프로젝트**

#### **1. 프로젝트 목표**

현재의 'Oracle NLSQL MCP 서버'를 **스스로 학습하고, 더 빠르고, 더 정확하며, 사용하기 편리한 지능형 시스템**으로 전면 리뉴얼하는 것을 목표로 합니다.

#### **2. 현 시스템의 문제점**

*   **성능 저하**: 100개 이상의 테이블 환경에서 메타데이터 검색에 5-10초가 소요됩니다.
*   **학습 능력 부재**: 성공적인 SQL 패턴을 기억하지 못해, 매번 처음부터 쿼리를 생성합니다.
*   **높은 초기 비용**: PowerBuilder 같은 레거시 시스템의 로직을 반영하려면 수동으로 2-3일간 CSV 파일을 작성해야 합니다.
*   **불편한 관리**: 모든 관리가 CLI(명령어) 기반으로 이루어져 직관적이지 않고, 진행 상황을 파악하기 어렵습니다.

#### **3. 핵심 변경 사항 (솔루션)**

##### **가. 3-Tier 아키텍처로 분리**

기존의 단일(Monolithic) 서버 구조를 3개의 독립적인 계층으로 분리하여 안정성과 확장성을 확보합니다.

1.  **MCP 서버 (Tier 1)**: Claude AI와의 연동 및 핵심적인 SQL 생성/실행 기능만 남겨 가볍게 유지합니다.
2.  **관리 백엔드 (Tier 2)**: FastAPI 기반의 REST API 서버를 신설하여, PowerBuilder 학습, 파일 업로드, Vector DB 관리 등 무거운 백그라운드 작업을 전담 처리합니다.
3.  **웹 UI (Tier 3)**: React 기반의 관리자용 웹 화면을 개발하여, 사용자가 브라우저에서 직관적으로 시스템을 설정하고, 학습 진행 상황을 모니터링하며, 결과를 관리할 수 있도록 합니다.

##### **나. Vector DB 도입 (핵심 기술)**

*   **목표**: 느린 JSON 파일 검색을 **초고속 의미 기반 검색(Semantic Search)**으로 대체합니다.
*   **기술**: 로컬에서 실행 가능한 `ChromaDB`를 도입합니다.
*   **대상**: DB 스키마 정보, 비즈니스 규칙, 성공한 SQL 쿼리 패턴, PowerBuilder에서 추출한 지식 등 **모든 정보를 벡터화**하여 저장합니다.
*   **효과**:
    *   **속도 향상**: 검색 응답 시간을 1초 미만으로 단축합니다.
    *   **정확도 향상**: '조용한 고객'과 '활동 없는 고객'처럼 단어는 다르지만 의미가 같은 질문을 이해하고 처리할 수 있게 됩니다.

##### **다. 자동 학습 시스템 구축**

1.  **실시간 학습**: 사용자와의 대화에서 성공적으로 생성된 SQL 쿼리 패턴을 자동으로 Vector DB에 저장하고, 유사한 질문이 들어오면 LLM을 호출하지 않고 즉시 재사용합니다.
2.  **PowerBuilder 소스 학습 (신규 기능)**: 사용자가 `.srw`, `.srd` 같은 PowerBuilder 소스 파일을 웹 UI에 업로드하면, 시스템이 **자동으로 소스코드를 분석**하여 그 안에 숨겨진 SQL 쿼리, 테이블 관계, 비즈니스 로직을 추출하고 Vector DB에 학습시킵니다.

#### **4. 기대 효과**

*   **응답 속도**: 5-10초 → **1초 미만**으로 단축
*   **초기 구축 시간**: 2-3일 → **2-3시간**으로 단축 (PowerBuilder 자동 학습 덕분)
*   **LLM API 비용**: 유사 쿼리 재사용으로 약 **60% 절감**
*   **SQL 정확도**: 70-80% → **90-95%** 로 향상
